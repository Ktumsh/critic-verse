<app-header title="Programas de TV" [logo]="false"></app-header>

<ion-content [fullscreen]="true">
  <!--Admin float button-->
  <app-admin-float-btn class="fixed bottom-0 right-0 z-50" />

  <article class="p-4 space-y-10">
    <!-- Loading -->
    <div *ngIf="isLoading; else tvListContent" class="flex flex-col space-y-3">
      <div
        class="flex items-center gap-4 relative overflow-hidden rounded-xl bg-secondary"
        *ngFor="let skeleton of [1, 2, 3, 4, 5]"
      >
        <ion-skeleton-text
          [animated]="true"
          class="img-skeleton"
        ></ion-skeleton-text>
        <div class="flex flex-col gap-2 pr-4 w-full">
          <ion-skeleton-text
            [animated]="true"
            class="w-2/3 h-6 rounded-full"
          ></ion-skeleton-text>
          <div class="flex items-center gap-3">
            <ion-skeleton-text
              [animated]="true"
              class="size-6 rounded-full"
            ></ion-skeleton-text>
            <ion-skeleton-text
              [animated]="true"
              class="w-1/3 h-4 rounded-full"
            ></ion-skeleton-text>
          </div>
        </div>
      </div>
    </div>

    <!-- Content -->
    <ng-template #tvListContent>
      <section>
        <div class="flex justify-between items-center px-4 mb-2">
          <h2 class="text-base text-white-m letter-spacing-widest uppercase">
            Más populares
          </h2>
        </div>
        <div class="flex flex-col space-y-4">
          <div
            *ngFor="let tv of tvList"
            class="flex items-center gap-4 ion-activatable relative overflow-hidden rounded-xl"
            [routerLink]="['/main/tv-detail', tv.id]"
          >
            <div class="flex min-w-20 rounded-xl overflow-hidden shadow-lg">
              <img
                [alt]="tv.title"
                [ngSrc]="tv.image || 'https://ionicframework.com/docs/img/demos/thumbnail.svg'"
                width="80"
                height="120"
                class="h-full object-cover object-center animate-fade-in animate-duration-300"
              />
            </div>
            <div class="flex flex-col gap-2 pr-4">
              <h3 class="text-lg text-white-h font-semibold">{{ tv.title }}</h3>
              <div class="flex items-center gap-3">
                <div
                  [ngClass]="['flex items-center justify-center size-7 min-w-7 rounded-full', tv.rating >= 0 && tv.rating < 5 ? 'bg-danger' : tv.rating >= 5 && tv.rating < 8 ? 'bg-warning' : 'bg-success']"
                >
                  <span class="font-bold text-white"> {{ tv.rating }} </span>
                </div>
                <span class="text-xs text-white-m">
                  {{ getRatingDescription(tv.rating) }}
                </span>
              </div>
            </div>
            <ion-ripple-effect></ion-ripple-effect>
          </div>
        </div>
      </section>
      <section class="relative mb-8">
        <div class="flex items-center justify-center">
          <img
            src="assets/empty-screen-working.webp"
            alt=""
            class="opacity-40 w-2/3"
          />
        </div>
        <div class="flex flex-col justify-center items-center px-4 mb-2">
          <h3 class="text-base text-white-m">Más proximamente...</h3>
          <p class="text-sm text-white-l">Estamos trabajando para ti</p>
        </div>
      </section>
    </ng-template>
  </article>
</ion-content>
